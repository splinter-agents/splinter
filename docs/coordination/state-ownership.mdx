---
title: State Ownership
description: Define which agent can write which fields
---

# State Ownership

Prevent agents from overwriting each other's work.

## Usage

```python
from splinter.coordination import StateOwnershipManager

ownership = StateOwnershipManager()

# Researcher owns research.* fields
ownership.register_ownership("researcher", ["research.*"])

# Writer owns content.* fields
ownership.register_ownership("writer", ["content.*"])

# Check before write
ownership.check_write("researcher", "research.findings")  # OK
ownership.check_write("writer", "research.findings")       # Error!
```

## Wildcard Patterns

```python
# Own all fields under a prefix
ownership.register_ownership("researcher", ["research.*"])

# Own specific field
ownership.register_ownership("admin", ["settings.api_key"])

# Own multiple patterns
ownership.register_ownership("editor", ["draft.*", "review.*"])
```

## Protected State

```python
from splinter.coordination import ProtectedState

protected = ProtectedState(
    state=shared_state,
    ownership=ownership,
    current_agent="researcher",
)

# Writes are automatically checked
protected.set("research.findings", [...])  # OK
protected.set("content.article", "...")     # Error!
```

## Query Ownership

```python
# Get owner of a field
owner = ownership.get_owner("research.findings")  # "researcher"

# Get all fields owned by agent
fields = ownership.get_owned_fields("researcher")  # ["research.*"]
```

## Error Handling

```python
from splinter.exceptions import StateOwnershipError

try:
    ownership.check_write("writer", "research.findings")
except StateOwnershipError as e:
    print(f"Agent '{e.agent_id}' cannot write to '{e.field}'")
    print(f"Owned by: {e.owner}")
```

## With Workflow

```python
from splinter import AgentConfig

config = AgentConfig(
    agent_id="researcher",
    state_ownership=["research.*"],  # This agent owns these fields
    ...
)
```
