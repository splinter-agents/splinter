---
title: Schema Validation
description: Validate agent outputs before handoff
---

# Schema Validation

Ensure agents produce valid output before passing to the next agent.

## Schema Validator

```python
from splinter.coordination import SchemaValidator

# Define expected output
schema = {
    "type": "object",
    "properties": {
        "findings": {"type": "array"},
        "summary": {"type": "string"},
    },
    "required": ["findings"],
}

validator = SchemaValidator(schema)

# Validate output
output = {"findings": ["a", "b"], "summary": "text"}
errors = validator.validate(output)

if errors:
    print(f"Validation failed: {errors}")
```

## Handoff Manager

Validate outputs when passing between agents:

```python
from splinter.coordination import HandoffManager

handoff = HandoffManager()

# Register handoff schema
handoff.register_handoff(
    source_agent="researcher",
    target_agent="writer",
    schema={
        "type": "object",
        "properties": {
            "findings": {"type": "array"},
        },
        "required": ["findings"],
    },
)

# Validate on handoff
handoff.validate_handoff("researcher", "writer", output)
```

## Strict Mode

```python
# Strict mode (default): Raise on any error
handoff.validate_handoff(..., strict=True)

# Lenient mode: Return errors without raising
errors = handoff.validate_handoff(..., strict=False)
```

## Generate Schema from Example

```python
from splinter.coordination import create_schema_from_example

example = {
    "findings": ["finding1", "finding2"],
    "summary": "A summary",
    "count": 5,
}

schema = create_schema_from_example(example)
# Generates JSON Schema from the example
```

## Error Handling

```python
from splinter.exceptions import SchemaValidationError

try:
    handoff.validate_handoff("researcher", "writer", output)
except SchemaValidationError as e:
    print(f"Agent '{e.agent_id}' produced invalid output:")
    for error in e.errors:
        print(f"  - {error}")
```

## With Agent Config

```python
from splinter import AgentConfig

config = AgentConfig(
    agent_id="researcher",
    output_schema={
        "type": "object",
        "properties": {
            "findings": {"type": "array"},
        },
        "required": ["findings"],
    },
    ...
)
```
