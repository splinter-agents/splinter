---
title: Retry Strategy
description: Handle failures with retries or fail-closed mode
---

# Retry Strategy

Automatically retry failed operations with configurable strategies.

## Basic Retry

```python
from splinter.control import RetryStrategy, RetryConfig

strategy = RetryStrategy(config=RetryConfig(
    max_attempts=3,
    initial_delay=1.0,      # 1 second
    max_delay=30.0,         # Cap at 30 seconds
    exponential_base=2.0,   # Double each time
    jitter=True,            # Add randomness
))

result = await strategy.execute(my_async_function, arg1, arg2)
```

## Fail-Closed Mode

Only retry specific errors. Fail immediately on others.

```python
from splinter.control import RetryMode

strategy = RetryStrategy(config=RetryConfig(
    mode=RetryMode.FAIL_CLOSED,
    retryable_errors=[ConnectionError, TimeoutError],
    fail_fast_errors=[AuthenticationError],  # Never retry these
))
```

## Decorator

```python
from splinter.control import with_retry

@with_retry(max_attempts=3, initial_delay=1.0)
async def my_function():
    ...
```

## Callbacks

```python
def on_retry(attempt: int, error: Exception, delay: float):
    print(f"Retry {attempt} after {delay}s: {error}")

def on_failure(attempts: int, error: Exception):
    print(f"Failed after {attempts} attempts: {error}")

strategy = RetryStrategy(
    config=config,
    on_retry=on_retry,
    on_failure=on_failure,
)
```

## Error Handling

```python
from splinter.control.retry import RetryExhaustedError

try:
    result = await strategy.execute(failing_function)
except RetryExhaustedError as e:
    print(f"Gave up after {e.attempts} attempts")
    print(f"Last error: {e.last_error}")
```

## Stats

```python
stats = strategy.get_stats()
print(f"Total attempts: {stats['total_attempts']}")
print(f"Successful retries: {stats['successful_retries']}")
print(f"Failed retries: {stats['failed_retries']}")
```
