---
title: Workflow
description: Workflow API reference
---

## Workflow

Orchestrates multiple agents with dependencies.

### Constructor

```python
Workflow(
    workflow_id: str | None = None,
    name: str | None = None,
    limits: ExecutionLimits | None = None,
    loop_detection: LoopDetectionConfig | None = None,
    memory_config: MemoryConfig | None = None,
    checkpoint_enabled: bool = True,
    on_step_complete: Callable | None = None,
    on_workflow_complete: Callable | None = None,
)
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `workflow_id` | `str` | Unique ID (auto-generated if None) |
| `name` | `str` | Display name |
| `limits` | `ExecutionLimits` | Budget/step/time limits |
| `checkpoint_enabled` | `bool` | Enable checkpointing |
| `on_step_complete` | `Callable` | Hook after each step |
| `on_workflow_complete` | `Callable` | Hook when done |

### Methods

#### add_agent

```python
workflow.add_agent(config: AgentConfig) -> Workflow
```

Add an agent to the workflow.

#### add_step

```python
workflow.add_step(
    agent_id: str,
    depends_on: list[str] | None = None,
    input_mapping: dict[str, str] | None = None,
    condition: str | None = None,
) -> Workflow
```

Add an execution step.

| Parameter | Type | Description |
|-----------|------|-------------|
| `agent_id` | `str` | Agent to execute |
| `depends_on` | `list[str]` | Agent IDs that must complete first |
| `input_mapping` | `dict` | Map state fields to input |
| `condition` | `str` | Optional condition expression |

#### add_handoff_schema

```python
workflow.add_handoff_schema(
    source: str,
    target: str,
    schema: dict,
    required_fields: list[str] | None = None,
) -> Workflow
```

Add schema validation for handoffs.

#### add_state_ownership

```python
workflow.add_state_ownership(
    agent_id: str,
    fields: list[str],
) -> Workflow
```

Define state ownership.

#### run

```python
await workflow.run(
    initial_state: dict | None = None,
    resume: bool = False,
) -> WorkflowResult
```

Run the workflow.

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `workflow_id` | `str` | Workflow ID |
| `status` | `WorkflowStatus` | Current status |
| `current_step` | `int` | Current step index |

## WorkflowResult

Result of a workflow execution.

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `workflow_id` | `str` | Workflow ID |
| `status` | `WorkflowStatus` | Final status |
| `success` | `bool` | Whether completed successfully |
| `state` | `dict` | Final state |
| `outputs` | `dict` | Agent outputs |
| `metrics` | `dict` | Execution metrics |
| `error` | `str | None` | Error if failed |
| `completed_at` | `datetime` | Completion time |

## WorkflowStatus

```python
class WorkflowStatus(Enum):
    PENDING = "pending"
    RUNNING = "running"
    PAUSED = "paused"
    COMPLETED = "completed"
    FAILED = "failed"
    CANCELLED = "cancelled"
```
