---
title: Agent
description: Agent API reference
---

## Agent

A single agent in a workflow.

### Constructor

```python
Agent(
    config: AgentConfig,
    gateway: Gateway,
    memory: AgentMemory | None = None,
    tool_executor: Callable | None = None,
)
```

### Methods

#### run

```python
await agent.run(
    task: str,
    state: SharedState | dict | None = None,
    context: dict | None = None,
    max_tool_iterations: int = 10,
) -> dict
```

Run the agent on a task.

| Parameter | Type | Description |
|-----------|------|-------------|
| `task` | `str` | Task to perform |
| `state` | `SharedState` | Shared state |
| `context` | `dict` | Additional context |
| `max_tool_iterations` | `int` | Max tool call loops |

Returns:
```python
{
    "result": {...},  # Parsed output
    "raw": "...",     # Raw response
}
```

#### reset

```python
agent.reset() -> None
```

Reset agent state.

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `id` | `str` | Agent ID |
| `config` | `AgentConfig` | Agent config |
| `status` | `AgentStatus` | Current status |
| `last_response` | `LLMResponse` | Last response |

## AgentBuilder

Fluent API for building agents.

```python
agent = (
    AgentBuilder("my-agent")
    .with_provider(LLMProvider.OPENAI, "gpt-4o-mini")
    .with_system_prompt("You are a helpful assistant.")
    .with_tools(["web_search"])
    .with_state_ownership(["data.*"])
    .with_output_schema({...})
    .with_limits(max_steps=10, max_budget=1.0)
    .build(gateway)
)
```

### Methods

| Method | Description |
|--------|-------------|
| `with_name(name)` | Set display name |
| `with_description(desc)` | Set description |
| `with_provider(provider, model)` | Set LLM provider |
| `with_model(model)` | Set model name |
| `with_system_prompt(prompt)` | Set system prompt |
| `with_tools(tools)` | Set available tools |
| `with_state_ownership(fields)` | Set owned state fields |
| `with_output_schema(schema)` | Set output schema |
| `with_limits(...)` | Set per-agent limits |
| `build(gateway)` | Build the agent |

## AgentConfig

Configuration for an agent.

```python
AgentConfig(
    agent_id: str,
    name: str | None = None,
    description: str | None = None,
    provider: LLMProvider = LLMProvider.OPENAI,
    model: str = "gpt-4",
    system_prompt: str | None = None,
    tools: list[str] = [],
    state_ownership: list[str] = [],
    output_schema: dict | None = None,
    max_steps: int | None = None,
    max_budget: float | None = None,
)
```

## AgentStatus

```python
class AgentStatus(Enum):
    PENDING = "pending"
    RUNNING = "running"
    COMPLETED = "completed"
    FAILED = "failed"
    BLOCKED = "blocked"
```
